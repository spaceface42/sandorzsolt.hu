<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Intersection Observer</title>
    <style>
      .observable {
        margin: 150px;
      }
      .observable p {
        color: #777;
        font-size: 1.6rem;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        line-height: 1.6;
        padding: 1rem;
        border: 1px solid #eee;
        margin: 1rem 0;
        transform: translateX(-100%);
        transition: transform 0.5s linear;
        /* opacity: 0; */
      }
      .observable p.active {
        opacity: 1;
        transform: translateX(0);
      }
      .observable p:nth-child(5n) {
        color: cornflowerblue;
      }
      .cover {
        position: fixed;
        top: 250px;
        right: 50px;
        bottom: 250px;
        left: 50px;
        background-color: hsla(30deg, 40%, 80%, 0.5);
      }
    </style>
</head>
<body>





<div class="observable">

    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur, pariatur.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas officiis in culpa praesentium id architecto, voluptate laboriosam reprehenderit illo ad?</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam unde, reiciendis laudantium deleniti, consequatur sint quam accusamus iure reprehenderit, qui aut a nisi aspernatur aliquid distinctio odio excepturi earum quia tempora animi! Pariatur ut eum unde, repellat porro cum ipsum modi perferendis libero, aspernatur sit possimus commodi voluptatum architecto. Inventore, reprehenderit. Temporibus a vitae ea ullam provident quibusdam voluptatem perspiciatis perferendis iste quasi quisquam consequatur voluptate error reprehenderit vero, nesciunt similique sunt illum sequi, enim nemo. Quod repudiandae laboriosam quis praesentium ea quibusdam veritatis consequuntur et adipisci aperiam eligendi, blanditiis dolorem maxime, magni, aspernatur dolorum neque qui hic. Sapiente, tenetur!</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime quas vero ullam rem quis autem atque nulla! Iste quae mollitia quis exercitationem consectetur maxime quam velit, ducimus maiores natus temporibus!</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Temporibus minima unde repudiandae nisi, optio provident quae! Error laboriosam maiores molestias totam fugiat dolor quia tempora.</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Consectetur, pariatur.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptas officiis in culpa praesentium id architecto, voluptate laboriosam reprehenderit illo ad?</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam unde, reiciendis laudantium deleniti, consequatur sint quam accusamus iure reprehenderit, qui aut a nisi aspernatur aliquid distinctio odio excepturi earum quia tempora animi! Pariatur ut eum unde, repellat porro cum ipsum modi perferendis libero, aspernatur sit possimus commodi voluptatum architecto. Inventore, reprehenderit. Temporibus a vitae ea ullam provident quibusdam voluptatem perspiciatis perferendis iste quasi quisquam consequatur voluptate error reprehenderit vero, nesciunt similique sunt illum sequi, enim nemo. Quod repudiandae laboriosam quis praesentium ea quibusdam veritatis consequuntur et adipisci aperiam eligendi, blanditiis dolorem maxime, magni, aspernatur dolorum neque qui hic. Sapiente, tenetur!</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maxime quas vero ullam rem quis autem atque nulla! Iste quae mollitia quis exercitationem consectetur maxime quam velit, ducimus maiores natus temporibus!</p>
    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Temporibus minima unde repudiandae nisi, optio provident quae! Error laboriosam maiores molestias totam fugiat dolor quia tempora.</p>



</div>






<div class="cover">&nbsp;</div>

<script>


document.addEventListener("DOMContentLoaded", () => {



let observerOptions = {
    root: null,
    rootMargin: "-250px -50px",
    threshold: 0.05
}


let observer = new IntersectionObserver(observerCallback, observerOptions)

    document.querySelectorAll(".observable p").forEach(p => {
        observer.observe(p)
            // console.log("watching", p.textContent);
    })

})

// entries all 30 paragraphs
function observerCallback(entries, ob) {

    entries.forEach(entry => {
        if (entry.isIntersecting) {
            console.log("intersecting")
            // console.log(entry.target);
            // console.log(entry.time, entry.intersectionRatio);
            entry.target.classList.add("active")
            return
            // ob.unobserve(entry.target);
        } else {
            entry.target.classList.remove("active")
        }

    })

}

</script>
</body>
</html>
